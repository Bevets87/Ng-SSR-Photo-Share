(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"5CMv":function(n,t,l){"use strict";l.r(t);var o=l("CcnG"),s=function(){return function(){}}(),e=l("zl1X"),u=l("pMnS"),i=l("lPHY"),r=l("h+k6"),c=l("EuML"),a=l("VEMy"),b=l("Hblw"),p=l("VoZ6"),f=l("kTR9"),h=l("D6h0"),d=l("Ip0R"),g=function(){function n(){this.load=new o.m}return n.prototype.onScrollBottom=function(){this.load.emit()},n}(),y=o.ob({encapsulation:0,styles:[[".post-list[_ngcontent-%COMP%]{overflow-y:scroll;overflow:-moz-scrollbars-none;-ms-overflow-style:none;max-height:100vh}.post-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:0!important}"]],data:{}});function m(n){return o.Gb(0,[(n()(),o.qb(0,0,null,null,2,null,null,null,null,null,null,null)),(n()(),o.qb(1,0,null,null,1,"app-post",[],null,null,null,i.b,i.a)),o.pb(2,245760,null,0,r.a,[c.a,a.a,b.a],{post:[0,"post"],followable:[1,"followable"]},null)],function(n,t){n(t,2,0,t.context.$implicit,!1)},null)}function v(n){return o.Gb(0,[(n()(),o.qb(0,0,null,null,1,"app-spinner",[],null,null,null,p.b,p.a)),o.pb(1,49152,null,0,f.a,[],null,null)],null,null)}function P(n){return o.Gb(0,[(n()(),o.qb(0,0,null,null,5,"div",[["class","post-list"]],null,[[null,"scrollBottom"]],function(n,t,l){var o=!0;return"scrollBottom"===t&&(o=!1!==n.component.onScrollBottom()&&o),o},null,null)),o.pb(1,4341760,null,0,h.a,[o.k],{appScroll:[0,"appScroll"]},{scrollBottom:"scrollBottom"}),(n()(),o.ib(16777216,null,null,1,null,m)),o.pb(3,278528,null,0,d.k,[o.Q,o.N,o.t],{ngForOf:[0,"ngForOf"]},null),(n()(),o.ib(16777216,null,null,1,null,v)),o.pb(5,16384,null,0,d.l,[o.Q,o.N],{ngIf:[0,"ngIf"]},null)],function(n,t){var l=t.component;n(t,1,0,95),n(t,3,0,l.posts),n(t,5,0,l.loading)},null)}var S=l("wju7"),O=l("gyQG"),w=l("Y/86"),M=l("UUiz"),C=l("Phjn"),x=l("xMyE"),j=l("vubp"),k=l("9Z1F"),U=function(){function n(n,t,l,o,s){this.route=n,this.router=t,this.postService=l,this.userService=o,this.authService=s,this.posts=[],this.postsLoading=!1,this.postsPagination={limit:5,offset:0,count:0,table:"Posts"},this.users=[],this.usersLoading=!1,this.usersScrollable=!1,this.usersPagination={limit:5,offset:0,count:0,table:"Users"}}return n.prototype.ngOnInit=function(){var n=this;this.subscribeMe(),this.route.data.pipe(Object(C.a)(function(t){return n.postsPagination.count=t.data.count,n.posts=t.data.data,n.usersPagination.limit=t.data.count?5:15,n.usersScrollable=!t.data.count,n.userService.getUsersSuggested(n.usersPagination).pipe(Object(x.a)(function(t){n.users=t.data,n.usersPagination.count=t.count}))})).subscribe()},n.prototype.unsubscribePosts=function(){this.postsSubscription&&this.postsSubscription.unsubscribe()},n.prototype.unsubscribeUsers=function(){this.usersSubscription&&this.usersSubscription.unsubscribe()},n.prototype.ngOnDestroy=function(){this.unsubscribePosts(),this.unsubscribeUsers(),this.unsubscribeMe()},n.prototype.loadPosts=function(){var n=this;this.postsLoading=!0,this.postsSubscription=this.postService.getPostsFollowing(this.postsPagination).pipe(Object(j.a)(300),Object(k.a)(function(t){return n.router.navigateByUrl("/login"),t})).subscribe(function(t){n.postsLoading=!1,t.data.forEach(function(t){n.posts.push(t)})})},n.prototype.loadUsers=function(){var n=this;this.usersLoading=!0,this.usersSubscription=this.userService.getUsersSuggested(this.usersPagination).pipe(Object(j.a)(300),Object(k.a)(function(t){return n.router.navigateByUrl("/login"),t})).subscribe(function(t){n.usersLoading=!1,t.data.forEach(function(t){n.users.push(t)})})},n.prototype.onLoadUsers=function(){this.usersScrollable&&(this.usersLoading||this.hasNext(this.usersPagination)&&(this.setNext(this.usersPagination),this.loadUsers()))},n.prototype.hasNext=function(n){return n.limit+n.offset<n.count},n.prototype.setNext=function(n){n.offset=n.limit+n.offset},n.prototype.onLoadPosts=function(){this.postsLoading||this.hasNext(this.postsPagination)&&(this.setNext(this.postsPagination),this.loadPosts())},n.prototype.getSideSectionClass=function(){return this.postsPagination.count?"clr-col-xs-12 clr-col-sm-10 clr-offset-sm-1 clr-col-md-6 clr-offset-md-0 clr-col-lg-5":"clr-col-xs-12 clr-col-sm-10 clr-offset-sm-1 clr-col-md-8 clr-offset-md-2"},n.prototype.hasUsers=function(){return this.users.length>0},n.prototype.onProfile=function(){this.router.navigateByUrl("/profile/"+this.me.id)},n.prototype.subscribeMe=function(){var n=this;this.meSubscription=this.authService.user.subscribe(function(t){n.me=t})},n.prototype.unsubscribeMe=function(){this.meSubscription&&this.meSubscription.unsubscribe()},n}(),q=l("ZYCi"),_=o.ob({encapsulation:0,styles:[[".home-page[_ngcontent-%COMP%]{width:100%;min-height:100vh;background:#e9ecef;display:flex;flex-direction:column;align-items:center;justify-content:flex-start}.home-page-profile[_ngcontent-%COMP%]{width:100%;height:3rem;background:#fff}.home-page[_ngcontent-%COMP%]   .clr-row[_ngcontent-%COMP%]{width:60%}@media only screen and (max-width:112.5em){.home-page[_ngcontent-%COMP%]   .clr-row[_ngcontent-%COMP%]{width:70%}}@media only screen and (max-width:75em){.home-page[_ngcontent-%COMP%]   .clr-row[_ngcontent-%COMP%]{width:80%}}@media only screen and (max-width:56.25em){.home-page[_ngcontent-%COMP%]   .clr-row[_ngcontent-%COMP%]{width:95%}}@media only screen and (max-width:37.5em){.home-page[_ngcontent-%COMP%]   .clr-row[_ngcontent-%COMP%]{width:100%}}.home-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:0 0}.home-page[_ngcontent-%COMP%]   .card-block[_ngcontent-%COMP%]{background:#fff}"]],data:{}});function L(n){return o.Gb(0,[(n()(),o.qb(0,0,null,null,2,"div",[["class","clr-col-xs-12 clr-col-sm-10 clr-offset-sm-1 clr-col-md-6 clr-offset-md-0 clr-col-lg-7"]],null,null,null,null,null)),(n()(),o.qb(1,0,null,null,1,"app-post-list",[],null,[[null,"load"]],function(n,t,l){var o=!0;return"load"===t&&(o=!1!==n.component.onLoadPosts()&&o),o},P,y)),o.pb(2,49152,null,0,g,[],{loading:[0,"loading"],posts:[1,"posts"]},{load:"load"})],function(n,t){var l=t.component;n(t,2,0,l.postsLoading,l.posts)},null)}function N(n){return o.Gb(0,[(n()(),o.qb(0,0,null,null,1,"app-user-list",[["title","Suggested"]],null,[[null,"load"]],function(n,t,l){var o=!0;return"load"===t&&(o=!1!==n.component.onLoadUsers()&&o),o},S.b,S.a)),o.pb(1,49152,null,0,O.a,[],{navigateable:[0,"navigateable"],users:[1,"users"],title:[2,"title"]},{load:"load"})],function(n,t){n(t,1,0,!0,t.component.users,"Suggested")},null)}function I(n){return o.Gb(0,[(n()(),o.qb(0,0,null,null,12,"div",[["class","home-page"]],null,null,null,null,null)),(n()(),o.qb(1,0,null,null,11,"div",[["class","clr-row"]],null,null,null,null,null)),(n()(),o.ib(16777216,null,null,1,null,L)),o.pb(3,16384,null,0,d.l,[o.Q,o.N],{ngIf:[0,"ngIf"]},null),(n()(),o.qb(4,0,null,null,8,"div",[],[[8,"className",0]],null,null,null,null)),(n()(),o.qb(5,0,null,null,5,"div",[["class","card"]],null,null,null,null,null)),(n()(),o.qb(6,0,null,null,1,"div",[["class","card-header"]],null,null,null,null,null)),(n()(),o.Fb(-1,null,[" Profile "])),(n()(),o.qb(8,0,null,null,2,"div",[["class","card-block"]],null,[[null,"click"]],function(n,t,l){var o=!0;return"click"===t&&(o=!1!==n.component.onProfile()&&o),o},null,null)),(n()(),o.qb(9,0,null,null,1,"app-avatar",[],null,null,null,w.b,w.a)),o.pb(10,49152,null,0,M.a,[],{name:[0,"name"],src:[1,"src"]},null),(n()(),o.ib(16777216,null,null,1,null,N)),o.pb(12,16384,null,0,d.l,[o.Q,o.N],{ngIf:[0,"ngIf"]},null)],function(n,t){var l=t.component;n(t,3,0,l.postsPagination.count),n(t,10,0,l.me.username,l.me.avatar),n(t,12,0,l.hasUsers())},function(n,t){n(t,4,0,t.component.getSideSectionClass())})}function B(n){return o.Gb(0,[(n()(),o.qb(0,0,null,null,1,"app-home",[],null,null,null,I,_)),o.pb(1,245760,null,0,U,[q.a,q.k,c.a,b.a,a.a],null,null)],function(n,t){n(t,1,0)},null)}var E=o.mb("app-home",U,B,{},{},[]),F=l("gIcY"),G=l("t/Na"),K=l("F/XL"),X=l("ZYjt"),Z=function(){function n(n,t,l){this.platformId=n,this.transferState=t,this.postService=l}return n.prototype.resolve=function(n,t){var l=this,o=Object(X.k)("posts_following");if(this.transferState.hasKey(o)){var s=this.transferState.get(o,{data:[],count:0});return this.transferState.remove(o),Object(K.a)(s)}return this.postService.getPostsFollowing({limit:5,offset:0}).pipe(Object(x.a)(function(n){Object(d.B)(l.platformId)&&l.transferState.set(o,n)}),Object(k.a)(function(n){return console.error(n),Object(K.a)(n)}))},n}(),A=l("xLE1"),R=l("x80Z"),D=l("6leL"),Q=Z,Y=function(){return function(){}}();l.d(t,"HomeModuleNgFactory",function(){return z});var z=o.nb(s,[],function(n){return o.xb([o.yb(512,o.j,o.db,[[8,[e.A,e.a,e.b,e.d,e.e,e.f,e.g,e.h,e.c,e.w,e.x,e.y,e.z,u.a,E]],[3,o.j],o.y]),o.yb(4608,d.n,d.m,[o.v,[2,d.D]]),o.yb(4608,F.A,F.A,[]),o.yb(4608,F.e,F.e,[]),o.yb(4608,G.h,G.n,[d.c,o.C,G.l]),o.yb(4608,G.o,G.o,[G.h,G.m]),o.yb(5120,G.a,function(n){return[n]},[G.o]),o.yb(4608,G.k,G.k,[]),o.yb(6144,G.i,null,[G.k]),o.yb(4608,G.g,G.g,[G.i]),o.yb(6144,G.b,null,[G.g]),o.yb(4608,G.f,G.j,[G.b,o.r]),o.yb(4608,G.c,G.c,[G.f]),o.yb(4608,Z,Z,[o.C,X.j,c.a]),o.yb(1073742336,d.b,d.b,[]),o.yb(1073742336,A.cb,A.cb,[]),o.yb(1073742336,A.qc,A.qc,[]),o.yb(1073742336,A.Kd,A.Kd,[]),o.yb(1073742336,A.U,A.U,[]),o.yb(1073742336,A.d,A.d,[]),o.yb(1073742336,A.W,A.W,[]),o.yb(1073742336,A.r,A.r,[]),o.yb(1073742336,A.Wd,A.Wd,[]),o.yb(1073742336,A.p,A.p,[]),o.yb(1073742336,A.sc,A.sc,[]),o.yb(1073742336,A.K,A.K,[]),o.yb(1073742336,F.y,F.y,[]),o.yb(1073742336,F.j,F.j,[]),o.yb(1073742336,A.gb,A.gb,[]),o.yb(1073742336,A.tb,A.tb,[]),o.yb(1073742336,A.xb,A.xb,[]),o.yb(1073742336,A.Ab,A.Ab,[]),o.yb(1073742336,A.Rb,A.Rb,[]),o.yb(1073742336,A.Z,A.Z,[]),o.yb(1073742336,A.lb,A.lb,[]),o.yb(1073742336,A.Cc,A.Cc,[]),o.yb(1073742336,A.O,A.O,[]),o.yb(1073742336,A.md,A.md,[]),o.yb(1073742336,A.E,A.E,[]),o.yb(1073742336,A.Kb,A.Kb,[]),o.yb(1073742336,A.Xb,A.Xb,[]),o.yb(1073742336,A.v,A.v,[]),o.yb(1073742336,A.ob,A.ob,[]),o.yb(1073742336,A.kb,A.kb,[]),o.yb(1073742336,A.i,A.i,[]),o.yb(1073742336,A.j,A.j,[]),o.yb(1073742336,A.mb,A.mb,[]),o.yb(1073742336,A.qb,A.qb,[]),o.yb(1073742336,A.td,A.td,[]),o.yb(1073742336,A.Pb,A.Pb,[]),o.yb(1073742336,A.cc,A.cc,[]),o.yb(1073742336,A.ib,A.ib,[]),o.yb(1073742336,A.Db,A.Db,[]),o.yb(1073742336,A.Ub,A.Ub,[]),o.yb(1073742336,A.ub,A.ub,[]),o.yb(1073742336,A.gc,A.gc,[]),o.yb(1073742336,A.a,A.a,[]),o.yb(1073742336,F.t,F.t,[]),o.yb(1073742336,G.e,G.e,[]),o.yb(1073742336,G.d,G.d,[]),o.yb(1073742336,R.a,R.a,[]),o.yb(1073742336,q.n,q.n,[[2,q.t],[2,q.k]]),o.yb(1073742336,Y,Y,[]),o.yb(1073742336,s,s,[]),o.yb(256,G.l,"XSRF-TOKEN",[]),o.yb(256,G.m,"X-XSRF-TOKEN",[]),o.yb(1024,q.i,function(){return[[{path:"",component:U,canActivate:[D.a],resolve:{data:Q}}]]},[])])})}}]);